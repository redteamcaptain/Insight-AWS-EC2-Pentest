# Insight Security Fellowship AWS Infrustructure Audit
As part of the Insight Security Fellowship Program, I decided to do a security audit and penetration test of Insight's ICON blockchain validator node running on AWS EC2. The main subjects of the audit are the deployment pattern (Terraform & Ansible) and the resulting live validator node running Ubuntu.

## Background
The methodology revolves around catching bugs earlier in the SDLC. Forward thinking companies integrate security as early as possible, as they are orders of magnitude cheaper to fix the earlier you catch them.

Lots of the work is securing your pipeline (dependency management, container scanning, repo security) and infrastructure (usually cloud security/Kubernetes).

## Summary

## Scoping
The project has a tiered scope due to time limitations.
- Stage 1: Live Node
- Stage 2: Deployment Pattern and Ansible/Terraform resources
- Stage 3:

## Amazon Legal Stuff
[AWS Pentesting Rules & Guidelines](https://aws.amazon.com/security/penetration-testing/)

## Tools

### Automated Full Scan
* [ScoutSuite](https://github.com/nccgroup/ScoutSuite)

### Intelligence gathering

* Port Scan
  * [Nmap](https://tools.kali.org/information-gathering/nmap)
  * [nmap_vulners](https://github.com/vulnersCom/nmap-vulners)
* Enumeration
  * [enum4linux](https://tools.kali.org/information-gathering/enum4linux)
  * [Nikto](https://tools.kali.org/information-gathering/nikto)
  * [sslscan](https://github.com/rbsec/sslscan)
  * [SSLyze](https://tools.kali.org/information-gathering/sslyze)

### Vulnerability analysis

* Vulnerability Scan
  * [OpenVAS](https://tools.kali.org/vulnerability-analysis/openvas)
* Web Application Scan
  * [Skipfish](https://tools.kali.org/web-applications/skipfish)

### Exploit

* Brute Force Attack
  * [BruteSpray](https://tools.kali.org/password-attacks/brutespray)
* Exploitation
  * [Metasploit](https://tools.kali.org/exploitation-tools/metasploit-framework)
  * Exploit Database - [searchsploit](https://tools.kali.org/exploitation-tools/exploitdb)

### Misc

* Visualize
  * [Faraday](https://github.com/infobyte/faraday.git)


## Further Resources
- [Hands-On AWS Pentesting With Kali Linux]()
- [Pentesting Azure Applications]()
- [Dev-Sec.io](https://dev-sec.io/)
- [Practical Cloud Security: A Guide for Secure Design and Deployment](https://www.amazon.com/Practical-Cloud-Security-Secure-Deployment/dp/1492037516/)
- [Mastering AWS Security](https://www.amazon.com/Mastering-AWS-Security-maintain-ecosystem/dp/178829372X/)
- [Securing DevOps: Security in the Cloud](https://www.amazon.com/Securing-DevOps-Security-Julien-Vehent/dp/1617294136/)
- [AWS: Security Best Practices on AWS](https://www.amazon.com/AWS-Security-Practices-servers-applications/dp/178913451X/)

## Other Resources (Used to get up to speed on the subject matter)

- [An Introduction to Penetration Testing AWS](https://www.gracefulsecurity.com/an-introduction-to-penetration-testing-aws/)
- [Rhino Security: AWS Role Enumeration](https://rhinosecuritylabs.com/aws/aws-role-enumeration-iam-p2/)
- [Rhino Security: Mitigrating Priviledge Escalation](https://rhinosecuritylabs.com/aws/aws-privilege-escalation-methods-mitigation/)
- [Rhino Security: Assume the Worst- Role Enumeration](https://rhinosecuritylabs.com/penetration-testing/assume-worst-aws-assume-role-enumeration/)
- [Rhino Security: IAM User Enumeration](https://rhinosecuritylabs.com/penetration-testing/aws-iam-user-enumeration/)
- [AWS Threat Research](https://www.cyberark.com/threat-research-blog/cloud-shadow-admin-threat-10-permissions-protect/)
- [Pentesting S3 Buckets](https://www.provensec.com/penetration-testing-aws-s3-bucket/)
- [S3 Buckets for good or evil](https://pentestarmoury.com/2017/07/19/s3-buckets-for-good-and-evil/)
- [AWS Pentest Tools](https://github.com/RhinoSecurityLabs/Security-Research/tree/master/tools/aws-pentest-tools/s3)
- [Rhino Security: AWS Security Vulnerabilites](https://rhinosecuritylabs.com/cloud-security/aws-security-vulnerabilities-perspective/)
- [Penetration Testing an S3 Bucket](https://www.provensec.com/penetration-testing-aws-s3-bucket/)
- [Hunting for Insecure S3 Buckets](https://justhackerthings.com/post/hunting-for-insecure-amazon-s3-buckets/)
- [Penetration Testing S3 Buckets -- Part 1](http://www.virtuesecurity.com/aws-penetration-testing-part-1-s3-buckets/)

